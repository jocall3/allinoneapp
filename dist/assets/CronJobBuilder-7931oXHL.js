import{r as t,a1 as C,j as e,C as N,L as S,S as k}from"./index-Br2PlERp.js";import"https://esm.sh/octokit@4.0.2";const c=({label:n,value:o,onChange:d,options:l})=>e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:n}),e.jsxs("select",{value:o,onChange:a=>d(a.target.value),className:"w-full mt-1 px-3 py-2 rounded-md bg-surface border border-border",children:[e.jsx("option",{value:"*",children:"* (every)"}),l.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),D=({initialPrompt:n})=>{const[o,d]=t.useState("0"),[l,a]=t.useState("17"),[i,h]=t.useState("*"),[x,p]=t.useState("*"),[m,g]=t.useState("1-5"),[b,y]=t.useState(n||"every weekday at 5pm"),[f,j]=t.useState(!1),v=t.useMemo(()=>`${o} ${l} ${i} ${x} ${m}`,[o,l,i,x,m]),u=t.useCallback(async r=>{if(r){j(!0);try{const s=await C(r);d(s.minute),a(s.hour),h(s.dayOfMonth),p(s.month),g(s.dayOfWeek)}catch(s){console.error(s)}finally{j(!1)}}},[]);return t.useEffect(()=>{n&&(y(n),u(n))},[n,u]),e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[e.jsxs("header",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(N,{}),e.jsx("span",{className:"ml-3",children:"AI Cron Job Builder"})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Visually construct a cron expression or describe it in plain English."})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("input",{type:"text",value:b,onChange:r=>y(r.target.value),placeholder:"Describe a schedule...",className:"flex-grow px-3 py-1.5 rounded-md bg-surface border border-border text-sm"}),e.jsxs("button",{onClick:()=>u(b),disabled:f,className:"btn-primary px-4 py-1.5 flex items-center gap-2",children:[f?e.jsx(S,{}):e.jsx(k,{})," AI Generate"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsx(c,{label:"Minute",value:o,onChange:d,options:Array.from({length:60},(r,s)=>s)}),e.jsx(c,{label:"Hour",value:l,onChange:a,options:Array.from({length:24},(r,s)=>s)}),e.jsx(c,{label:"Day (Month)",value:i,onChange:h,options:Array.from({length:31},(r,s)=>s+1)}),e.jsx(c,{label:"Month",value:x,onChange:p,options:Array.from({length:12},(r,s)=>s+1)}),e.jsx(c,{label:"Day (Week)",value:m,onChange:g,options:Array.from({length:7},(r,s)=>s)})]}),e.jsxs("div",{className:"bg-surface p-4 rounded-lg text-center border border-border",children:[e.jsx("p",{className:"text-text-secondary text-sm",children:"Generated Expression"}),e.jsx("p",{className:"font-mono text-primary text-2xl mt-1",children:v}),e.jsx("button",{onClick:()=>navigator.clipboard.writeText(v),className:"mt-4 px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-md text-xs",children:"Copy"})]})]})};export{D as CronJobBuilder};
