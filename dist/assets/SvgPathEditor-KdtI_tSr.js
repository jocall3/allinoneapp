import{r as p,j as e,z as N,A as P}from"./index-Br2PlERp.js";import{d as M}from"./fileUtils-Dvg4vqd5.js";import"https://esm.sh/octokit@4.0.2";const k="M 20 80 Q 100 20 180 80 T 340 80",D=r=>(r.match(/[a-df-z][^a-df-z]*/ig)||[]).map((s,m)=>{const x=s[0],i=s.slice(1).trim().split(/[\s,]+/).map(parseFloat).filter(o=>!isNaN(o)),h=[];for(let o=0;o<i.length;o+=2)h.push({x:i[o],y:i[o+1]});return{id:m,command:x,points:h}}),C=r=>r.map(l=>`${l.command} ${l.points.map(s=>`${s.x} ${s.y}`).join(" ")}`).join(" "),T=()=>{const[r,l]=p.useState(k),s=p.useRef(null),[m,x]=p.useState(null),i=D(r),h=(t,n,a)=>{t.stopPropagation(),x({cmdIndex:n,pointIndex:a})},o=t=>{var c;if(!m||!s.current)return;const a=new DOMPoint(t.clientX,t.clientY).matrixTransform((c=s.current.getScreenCTM())==null?void 0:c.inverse()),d=i.map((u,w)=>{if(w===m.cmdIndex){const b=u.points.map((j,y)=>y===m.pointIndex?{x:Math.round(a.x),y:Math.round(a.y)}:j);return{...u,points:b}}return u});l(C(d))},f=()=>x(null),g=t=>{var c;if(!s.current)return;const a=new DOMPoint(t.clientX,t.clientY).matrixTransform((c=s.current.getScreenCTM())==null?void 0:c.inverse()),d=`${r} L ${Math.round(a.x)} ${Math.round(a.y)}`;l(d)},v=()=>{const t=`<svg viewBox="0 0 400 160" xmlns="http://www.w3.org/2000/svg">
  <path d="${r}" stroke="black" fill="transparent" stroke-width="2"/>
</svg>`;M(t,"path.svg","image/svg+xml")};return e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[e.jsxs("header",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(N,{}),e.jsx("span",{className:"ml-3",children:"SVG Path Editor"})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Visually create and manipulate SVG path data by dragging points."})]}),e.jsxs("div",{className:"flex-grow grid grid-cols-1 lg:grid-cols-2 gap-6 h-full overflow-hidden",children:[e.jsxs("div",{className:"flex flex-col h-full overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{htmlFor:"path-input",className:"text-sm font-medium text-text-secondary",children:"Path Data (d attribute)"}),e.jsxs("button",{onClick:v,className:"flex items-center gap-1 px-3 py-1 bg-gray-100 text-xs rounded-md hover:bg-gray-200",children:[e.jsx(P,{className:"w-4 h-4"})," Download SVG"]})]}),e.jsx("textarea",{id:"path-input",value:r,onChange:t=>l(t.target.value),className:"h-24 p-4 bg-surface border border-border rounded-md resize-y font-mono text-sm text-primary"}),e.jsx("div",{className:"flex-grow mt-4 p-4 bg-surface border-2 border-dashed border-border rounded-md overflow-hidden flex items-center justify-center min-h-[200px]",children:e.jsxs("svg",{ref:s,viewBox:"0 0 400 160",className:"w-full h-full cursor-crosshair",onMouseMove:o,onMouseUp:f,onMouseLeave:f,onDoubleClick:g,children:[e.jsx("rect",{width:"400",height:"160",fill:"var(--color-background)"}),e.jsx("path",{d:r,stroke:"var(--color-primary)",fill:"transparent",strokeWidth:"2"}),i.flatMap((t,n)=>t.points.map((a,d)=>e.jsx("circle",{cx:a.x,cy:a.y,r:"5",fill:t.command.toLowerCase()==="c"||t.command.toLowerCase()==="q"||t.command.toLowerCase()==="s"||t.command.toLowerCase()==="t"?"#fde047":"#f87171",stroke:"var(--color-surface)",strokeWidth:"2",className:"cursor-move hover:stroke-primary",onMouseDown:c=>h(c,n,d)},`${t.id}-${d}`)))]})}),e.jsx("p",{className:"text-xs text-center text-text-secondary mt-2",children:"Double-click on the canvas to add a new point."})]}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary mb-2",children:"Parsed Commands"}),e.jsx("div",{className:"flex-grow p-2 bg-background border border-border rounded-md overflow-y-auto font-mono text-xs space-y-2",children:i.map(t=>e.jsxs("div",{className:"p-2 bg-surface rounded",children:[e.jsx("span",{className:"font-bold text-amber-600",children:t.command}),e.jsxs("span",{className:"text-text-secondary",children:[" ",t.points.map(n=>`(${n.x},${n.y})`).join(" ")]})]},t.id))})]})]})]})};export{T as SvgPathEditor};
