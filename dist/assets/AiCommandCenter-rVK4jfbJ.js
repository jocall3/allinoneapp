import{u as j,r as l,g as N,R as y,T as r,l as C,j as e,C as T,L as E}from"./index-Br2PlERp.js";import"https://esm.sh/octokit@4.0.2";import{F as R}from"./taxonomyService-3ceLMdQG.js";const S=[{name:"navigateTo",description:"Navigates to a specific feature page.",parameters:{type:r.OBJECT,properties:{featureId:{type:r.STRING,description:"The ID of the feature to navigate to.",enum:y.map(t=>t.id)}},required:["featureId"]}},{name:"runFeatureWithInput",description:"Navigates to a feature and passes initial data to it.",parameters:{type:r.OBJECT,properties:{featureId:{type:r.STRING,description:"The ID of the feature to run.",enum:y.map(t=>t.id)},props:{type:r.OBJECT,description:"An object containing the initial properties for the feature, based on its required inputs.",properties:{initialCode:{type:r.STRING},initialPrompt:{type:r.STRING},beforeCode:{type:r.STRING},afterCode:{type:r.STRING},logInput:{type:r.STRING},diff:{type:r.STRING},codeInput:{type:r.STRING},jsonInput:{type:r.STRING}}}},required:["featureId","props"]}}],w=R.map(t=>`- ${t.name} (${t.id}): ${t.description} Inputs: ${t.inputs}`).join(`
`),m=({text:t,onClick:n})=>e.jsx("button",{onClick:()=>n(t),className:"px-3 py-1.5 bg-surface/80 border border-border rounded-full text-xs text-text-secondary hover:bg-surface-hover transition-colors",children:t}),G=({voiceCommand:t})=>{const{dispatch:n}=j(),[c,p]=l.useState(""),[d,h]=l.useState(!1),[g,o]=l.useState(""),i=l.useCallback(async s=>{if(s.trim()){h(!0),o("");try{const a=await N(s,S,w);if(a.functionCalls&&a.functionCalls.length>0){const b=a.functionCalls[0],{name:x,args:f}=b;switch(o(`Understood! Executing command: ${x}`),x){case"navigateTo":n({type:"LAUNCH_FEATURE",payload:{featureId:f.featureId}});break;case"runFeatureWithInput":n({type:"LAUNCH_FEATURE",payload:{featureId:f.featureId,props:f.props}});break;default:o(`Unknown command: ${x}`)}p("")}else o(a.text)}catch(a){C(a,{prompt:s}),o(a instanceof Error?a.message:"An unknown error occurred.")}finally{h(!1)}}},[n]);l.useEffect(()=>{t&&(p(t),i(t))},[t,i]);const I=s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),i(c))},u=s=>{p(s),i(s)};return e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[e.jsxs("header",{className:"mb-6 text-center",children:[e.jsxs("h1",{className:"text-4xl font-extrabold tracking-tight flex items-center justify-center",children:[e.jsx(T,{}),e.jsx("span",{className:"ml-3",children:"AI Command Center"})]}),e.jsx("p",{className:"mt-2 text-lg text-text-secondary",children:"What would you like to do?"})]}),e.jsxs("div",{className:"flex-grow flex flex-col justify-end max-w-3xl w-full mx-auto",children:[g&&e.jsx("div",{className:"mb-4 p-4 bg-surface/50 rounded-lg text-text-primary border border-border",children:e.jsxs("p",{children:[e.jsx("strong",{children:"AI:"})," ",g]})}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:c,onChange:s=>p(s.target.value),onKeyDown:I,disabled:d,placeholder:'Try "explain this code: const a = 1;" or "open the theme designer"',className:"w-full p-4 pr-28 rounded-lg bg-surface/80 border border-border focus:ring-2 focus:ring-primary focus:outline-none resize-none shadow-sm",rows:2}),e.jsx("button",{onClick:()=>i(c),disabled:d,className:"btn-primary absolute right-3 top-1/2 -translate-y-1/2 px-4 py-2",children:d?e.jsx(E,{}):"Send"})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 mt-4",children:[e.jsx(m,{text:"Open Theme Designer",onClick:u}),e.jsx(m,{text:"Generate a commit for a bug fix",onClick:u}),e.jsx(m,{text:"Create a regex for email validation",onClick:u})]}),e.jsx("p",{className:"text-xs text-text-secondary text-center mt-2",children:"Press Enter to send, Shift+Enter for new line."})]})]})};export{G as AiCommandCenter};
