import{r,bY as g,j as e,bZ as j,M as v,L as y}from"./index-Br2PlERp.js";import"https://esm.sh/octokit@4.0.2";const c=["Design a social media feed like Twitter.","Design a ride-sharing service like Uber.","Design a video streaming service like YouTube."],S=()=>{const[i,f]=r.useState(c[0]),[a,n]=r.useState([]),[t,d]=r.useState(""),[l,m]=r.useState(!1),x=r.useRef(null),u=r.useCallback(async()=>{if(!t.trim())return;const s=[...a,{sender:"user",text:t}];n(s),d(""),m(!0);try{const o=g(i,t);let p="";for await(const b of o)p+=b,n([...s,{sender:"ai",text:p}])}catch{n([...s,{sender:"ai",text:"Sorry, I encountered an error."}])}finally{m(!1)}},[i,t,a]);r.useEffect(()=>{var s;(s=x.current)==null||s.scrollIntoView({behavior:"smooth"})},[a]);const h=()=>{n([]),f(c[Math.floor(Math.random()*c.length)])};return e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[e.jsxs("header",{className:"mb-4",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(j,{}),e.jsx("span",{className:"ml-3",children:"System Design Interview Simulator"})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Practice for your next system design interview with an AI."})]}),e.jsxs("div",{className:"flex flex-col gap-4 flex-grow min-h-0",children:[e.jsxs("div",{className:"bg-surface p-4 rounded-lg border border-border",children:[e.jsxs("p",{className:"font-bold",children:["Your Prompt: ",e.jsx("span",{className:"font-normal",children:i})]}),e.jsx("button",{onClick:h,className:"text-xs text-primary hover:underline mt-1",children:"Get a new prompt"})]}),e.jsxs("div",{className:"flex-grow p-4 bg-background border border-border rounded-md overflow-y-auto space-y-4",children:[a.map((s,o)=>e.jsx("div",{className:`flex ${s.sender==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-xl p-3 rounded-lg ${s.sender==="user"?"bg-primary/20":"bg-surface"}`,children:e.jsx(v,{content:s.text})})},o)),l&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"p-3 rounded-lg bg-surface",children:e.jsx(y,{})})}),e.jsx("div",{ref:x})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("textarea",{value:t,onChange:s=>d(s.target.value),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),u())},placeholder:"Describe your approach...",className:"flex-grow p-3 bg-surface border border-border rounded-md resize-none",rows:3,disabled:l}),e.jsx("button",{onClick:u,disabled:l||!t,className:"btn-primary self-stretch",children:"Send"})]})]})]})};export{S as SystemDesignInterviewSimulator};
