import{r as n,j as e,P as j,A as y,L as w,M as N,N as C}from"./index-Br2PlERp.js";import{d as v,b as I,f as k}from"./fileUtils-Dvg4vqd5.js";import"https://esm.sh/octokit@4.0.2";const T=()=>{const[d,h]=n.useState(null),[r,m]=n.useState(""),[o,x]=n.useState(!1),[c,i]=n.useState(""),f=n.useRef(null),u=async t=>{x(!0),i(""),m("");try{const s=C(t);let a="";for await(const l of s)a+=l,m(a.replace(/^```(?:\w+\n)?/,"").replace(/```$/,""))}catch(s){i(s instanceof Error?s.message:"An unknown error occurred.")}finally{x(!1)}},p=async t=>{try{const[s,a]=await Promise.all([I(t),k(t)]);h(s),u(a)}catch{i("Could not process the image.")}},g=n.useCallback(async t=>{const s=t.clipboardData.items;for(const a of s)if(a.type.indexOf("image")!==-1){const l=a.getAsFile();l&&await p(l);return}},[]),b=async t=>{var a;const s=(a=t.target.files)==null?void 0:a[0];s&&await p(s)};return e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[e.jsxs("header",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(j,{}),e.jsx("span",{className:"ml-3",children:"AI Screenshot-to-Component"})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Paste or upload a screenshot of a UI element to generate React/Tailwind code."})]}),e.jsxs("div",{className:"flex-grow grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[e.jsx("div",{onPaste:g,className:"flex flex-col items-center justify-center bg-surface p-6 rounded-lg border-2 border-dashed border-border focus:outline-none focus:border-primary overflow-y-auto",tabIndex:0,children:d?e.jsx("img",{src:d,alt:"Pasted content",className:"max-w-full max-h-full object-contain rounded-md shadow-lg"}):e.jsxs("div",{className:"text-center text-text-secondary",children:[e.jsx("h2",{className:"text-xl font-bold text-text-primary",children:"Paste an image here"}),e.jsx("p",{className:"mb-2",children:"(Cmd/Ctrl + V)"}),e.jsx("p",{className:"text-sm",children:"or"}),e.jsx("button",{onClick:()=>{var t;return(t=f.current)==null?void 0:t.click()},className:"mt-2 btn-primary px-4 py-2 text-sm",children:"Upload File"}),e.jsx("input",{type:"file",ref:f,onChange:b,accept:"image/*",className:"hidden"})]})}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary",children:"Generated Code"}),r&&!o&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>navigator.clipboard.writeText(r),className:"px-3 py-1 bg-gray-100 text-xs rounded-md hover:bg-gray-200",children:"Copy Code"}),e.jsxs("button",{onClick:()=>v(r,"Component.tsx","text/typescript"),className:"flex items-center gap-1 px-3 py-1 bg-gray-100 text-xs rounded-md hover:bg-gray-200",children:[e.jsx(y,{className:"w-4 h-4"})," Download"]})]})]}),e.jsxs("div",{className:"flex-grow bg-background border border-border rounded-md overflow-y-auto",children:[o&&e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx(w,{})}),c&&e.jsx("p",{className:"p-4 text-red-500",children:c}),r&&!o&&e.jsx(N,{content:`\`\`\`tsx
${r}
\`\`\``}),!o&&!r&&!c&&e.jsx("div",{className:"text-text-secondary h-full flex items-center justify-center",children:"Generated component code will appear here."})]})]})]})]})};export{T as ScreenshotToComponent};
