import{r as s,a7 as k,a8 as A,j as e,a9 as C,aa as G,L as b,S,A as P}from"./index-Br2PlERp.js";import{b as U,f as F}from"./fileUtils-Dvg4vqd5.js";import"https://esm.sh/octokit@4.0.2";const j=["A majestic lion wearing a crown, painted in the style of Van Gogh.","A futuristic cityscape on another planet with two moons in the sky.","A cozy, magical library inside a giant tree.","A surreal image of a ship sailing on a sea of clouds.","An astronaut riding a space-themed bicycle on the moon."],E=()=>{const[r,m]=s.useState("A photorealistic image of a futuristic city at sunset, with flying cars."),[n,x]=s.useState(null),[i,u]=s.useState(null),[o,g]=s.useState(!1),[d,c]=s.useState(""),p=s.useRef(null),y=s.useCallback(async()=>{if(!r.trim()){c("Please enter a prompt to generate an image.");return}g(!0),c(""),u(null);try{let a;n?a=await k(r,n.base64,n.mimeType):a=await A(r),u(a)}catch(a){const t=a instanceof Error?a.message:"An unknown error occurred.";c(`Failed to generate image: ${t}`)}finally{g(!1)}},[r,n]),w=()=>{const a=j[Math.floor(Math.random()*j.length)];m(a)},h=async a=>{try{const[t,l]=await Promise.all([U(a),F(a)]);x({dataUrl:t,base64:l,mimeType:a.type})}catch{c("Could not process the image.")}},N=s.useCallback(async a=>{const t=a.clipboardData.items;for(const l of t)if(l.type.indexOf("image")!==-1){const f=l.getAsFile();if(f){await h(f);return}}},[]),I=async a=>{var l;const t=(l=a.target.files)==null?void 0:l[0];t&&await h(t)},v=()=>{if(!i)return;const a=document.createElement("a");a.href=i,a.download=`${r.slice(0,30).replace(/\s/g,"_")}.png`,document.body.appendChild(a),a.click(),document.body.removeChild(a)};return e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[e.jsxs("header",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(C,{}),e.jsx("span",{className:"ml-3",children:"AI Image Generator"})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Generate images from text, or provide an image for inspiration."})]}),e.jsxs("div",{className:"flex-grow grid grid-cols-1 lg:grid-cols-2 gap-6 min-h-0",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"prompt-input",className:"text-sm font-medium text-text-secondary",children:"Your Prompt"}),e.jsx("textarea",{id:"prompt-input",value:r,onChange:a=>m(a.target.value),placeholder:"e.g., A cute cat wearing a wizard hat",className:"w-full p-3 mt-1 rounded-md bg-surface border border-border focus:ring-2 focus:ring-primary focus:outline-none resize-y",rows:3})]}),e.jsxs("div",{className:"flex flex-col flex-grow min-h-[200px]",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary mb-1",children:"Inspiration Image (Optional)"}),e.jsx("div",{onPaste:N,className:"relative flex-grow flex flex-col items-center justify-center bg-surface p-4 rounded-lg border-2 border-dashed border-border focus:outline-none focus:border-primary",tabIndex:0,children:n?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:n.dataUrl,alt:"Uploaded content",className:"max-w-full max-h-full object-contain rounded-md shadow-lg"}),e.jsx("button",{onClick:()=>x(null),className:"absolute top-2 right-2 p-1 bg-black/30 text-white rounded-full hover:bg-black/50",children:e.jsx(G,{})})]}):e.jsxs("div",{className:"text-center text-text-secondary",children:[e.jsx("h2",{className:"text-lg font-bold text-text-primary",children:"Paste an image here"}),e.jsx("p",{className:"text-sm",children:"(Cmd/Ctrl + V)"}),e.jsx("p",{className:"text-xs my-1",children:"or"}),e.jsx("button",{onClick:()=>{var a;return(a=p.current)==null?void 0:a.click()},className:"text-sm font-semibold text-primary hover:underline",children:"Upload File"}),e.jsx("input",{type:"file",ref:p,onChange:I,accept:"image/*",className:"hidden"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:y,disabled:o,className:"btn-primary w-full flex items-center justify-center px-6 py-3",children:o?e.jsx(b,{}):"Generate Image"}),e.jsx("button",{onClick:w,disabled:o,className:"px-4 py-3 bg-surface border border-border rounded-md hover:bg-gray-100 transition-colors",title:"Surprise Me!",children:e.jsx(S,{})})]})]}),e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary mb-2",children:"Generated Image"}),e.jsxs("div",{className:"flex-grow flex items-center justify-center bg-background border-2 border-dashed border-border rounded-lg p-4 relative overflow-auto",children:[o&&e.jsx(b,{}),d&&e.jsx("p",{className:"text-red-500 text-center",children:d}),i&&!o&&e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i,alt:r||"Generated by AI",className:"max-w-full max-h-full object-contain rounded-md shadow-lg"}),e.jsx("button",{onClick:v,className:"absolute top-4 right-4 p-2 bg-black/30 text-white rounded-full hover:bg-black/50 backdrop-blur-sm",title:"Download Image",children:e.jsx(P,{})})]}),!o&&!i&&!d&&e.jsx("div",{className:"text-center text-text-secondary",children:e.jsx("p",{children:"Your generated image will appear here."})})]})]})]})]})};export{E as AiImageGenerator};
