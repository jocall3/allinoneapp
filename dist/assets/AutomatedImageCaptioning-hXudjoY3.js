import{r as t,aQ as j,j as e,a9 as b,L as N}from"./index-Br2PlERp.js";import{b as y,f as I}from"./fileUtils-Dvg4vqd5.js";import"https://esm.sh/octokit@4.0.2";const S=()=>{const[l,p]=t.useState(null),[n,c]=t.useState(""),[g,o]=t.useState(!1),[i,d]=t.useState(""),m=t.useRef(null),f=t.useCallback(async s=>{o(!0),d(""),c("");try{const a=await j(s.base64,s.mimeType);c(a)}catch(a){d(a instanceof Error?a.message:"An unknown error occurred.")}finally{o(!1)}},[]),u=async s=>{const[a,r]=await Promise.all([y(s),I(s)]),x={dataUrl:a,base64:r,mimeType:s.type};p(x),f(x)},h=s=>{var r;const a=(r=s.target.files)==null?void 0:r[0];a&&u(a)};return e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[e.jsxs("header",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(b,{}),e.jsx("span",{className:"ml-3",children:"AI Image Captioning"})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Generate descriptive captions and alt-text for your images."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-grow min-h-0",children:[e.jsx("div",{className:"flex flex-col items-center justify-center bg-surface p-6 rounded-lg border-2 border-dashed border-border",children:l?e.jsx("img",{src:l.dataUrl,alt:"Uploaded",className:"max-w-full max-h-full object-contain rounded-md"}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"mb-4",children:"Upload an image to get started."}),e.jsx("button",{onClick:()=>{var s;return(s=m.current)==null?void 0:s.click()},className:"btn-primary",children:"Select Image"}),e.jsx("input",{type:"file",ref:m,onChange:h,accept:"image/*",className:"hidden"})]})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary mb-2",children:"Generated Caption & Alt-Text"}),e.jsxs("div",{className:"flex-grow p-4 bg-background border border-border rounded-md",children:[g&&e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx(N,{})}),i&&e.jsx("p",{className:"text-red-500",children:i}),n&&e.jsx("p",{children:n})]})]})]})]})};export{S as AutomatedImageCaptioning};
