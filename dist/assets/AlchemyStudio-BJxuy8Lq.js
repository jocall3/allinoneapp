import{r as n,aG as b,j as e,S as j,L as w}from"./index-Br2PlERp.js";import{F as x}from"./index-BdfKc29l.js";import"https://esm.sh/octokit@4.0.2";const y=`
export func add(a: i32, b: i32): i32 {
  return a + b;
}
`,C=()=>{const[r,u]=n.useState(y),[f,h]=n.useState(""),[p,o]=n.useState([]),[i,d]=n.useState(!1),a=n.useRef(null);n.useEffect(()=>{a.current=new b},[]);const t=s=>{o(l=>[...l,s])},g=n.useCallback(async()=>{if(!a.current){t("❌ Alchemist engine not initialized.");return}d(!0),o([]),t("🔥 Initializing Alchemist Engine...");try{t("🔬 Compiling TSAL source...");const{instance:s,wat:l}=await a.current.compile(r);h(l),t("✅ Compilation successful."),t("🚀 Executing Wasm module...");const c=s.exports.add;if(typeof c!="function")throw new Error("Exported 'add' function not found in Wasm module.");const m=c(40,2);t(`▶️ Wasm execution result: add(40, 2) = ${m}`),t(m!==42?"❌ VALIDATION FAILED! The universe is broken.":"✨ Billion-dollar code confirmed. The machine is alive.")}catch(s){const l=s instanceof Error?s.message:"Unknown error";t(`☠️ Alchemy Engine FAILED: ${l}`),console.error(s)}finally{d(!1)}},[r]);return e.jsxs("div",{className:"h-full flex flex-col p-4 sm:p-6 lg:p-8 text-text-primary",children:[e.jsxs("header",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center",children:[e.jsx(j,{}),e.jsx("span",{className:"ml-3",children:"Alchemy Studio (TSAL Compiler)"})]}),e.jsx("p",{className:"text-text-secondary mt-1",children:"Write TypeScript Assembly Language (TSAL), compile it to WebAssembly, and run it in the browser."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 flex-grow min-h-0",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{htmlFor:"tsal-input",className:"text-sm font-medium text-text-secondary mb-2",children:"TSAL Code"}),e.jsx("div",{className:"flex-grow border border-border rounded-md overflow-hidden",children:e.jsx(x,{height:"100%",language:"typescript",value:r,onChange:s=>u(s||""),theme:"vs-dark",options:{minimap:{enabled:!1}}})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex-grow flex flex-col h-1/2",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary mb-2",children:"Generated WebAssembly Text (WAT)"}),e.jsx("div",{className:"flex-grow border border-border rounded-md overflow-hidden",children:e.jsx(x,{height:"100%",language:"wat",value:f,options:{readOnly:!0,minimap:{enabled:!1}},theme:"vs-dark"})})]}),e.jsxs("div",{className:"flex-grow flex flex-col h-1/2",children:[e.jsx("label",{className:"text-sm font-medium text-text-secondary mb-2",children:"Console Output"}),e.jsx("div",{className:"flex-grow p-4 bg-background border border-border rounded-md overflow-y-auto font-mono text-xs",children:p.map((s,l)=>e.jsx("p",{children:s},l))})]})]})]}),e.jsx("div",{className:"flex-shrink-0 mt-4",children:e.jsx("button",{onClick:g,disabled:i,className:"btn-primary w-full max-w-sm mx-auto",children:i?e.jsx(w,{}):"Compile & Run"})})]})};export{C as AlchemyStudio};
